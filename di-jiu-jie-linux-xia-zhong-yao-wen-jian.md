# 第1章  linux下重要文件

## 1.1  查看路由

\[root@oldboy ~\]\# route -n

Kernel IP routing table

Destination     Gateway         Genmask         Flags Metric Ref    Use Iface

10.0.0.0        0.0.0.0         255.255.255.0   U     0      0        0 eth0

169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 eth0

169.254.0.0     0.0.0.0         255.255.0.0     U     1003   0        0 eth1

0.0.0.0         10.0.0.2        0.0.0.0         UG    0      0        0 eth0

## 1.2  DNS配置文件

\[root@oldboy ~\]\# cat /etc/resolv.conf

; generated by /sbin/dhclient-script

search localdomain

nameserver 10.0.0.2

网卡里面配置DNS优先

## 1.3  网卡配置文件

cat /etc/sysconfig/network-scripts/ifcfg-eth0

DEVICE=eth0

TYPE=Ethernet

ONBOOT=yes

NM\_CONTROLLED=yes

BOOTPROTO=static

NETMASK=255.255.255.0

IPADDR=10.0.0.9

GATEWAY=10.0.0.2

## 1.4  hosts文件

\[root@oldboy ~\]\# cat /etc/hosts

127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4

::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

## 1.5  hosts文件在企业中的作用

1、开发，产品，测试等人员，用于通过正式的域名测试产品

2、服务器之间调用可以用域名（内部DNS），方便迁移

## 1.6  主机名配置  /etc/sysconfig/network

\[root@brj ~\]\# cat /etc/sysconfig/network

NETWORKING=yes

HOSTNAME=brj

## 1.7  查看主机名

\[root@brj ~\]\# hostname

brj

## 1.8  临时修改主机名

\[root@brj ~\]\# hostname oldboy36

## 1.9  永久修改主机名

\[root@brj ~\]\# sed 's\#HOSTNAME=.\*\#HOSTNAME=oldboy36\#' /etc/sysconfig/network

NETWORKING=yes

HOSTNAME=oldboy36

\[root@brj ~\]\# sed 's\#HOSTNAME=.\*\#HOSTNAME=oldboy36\#' /etc/sysconfig/network -i

\[root@brj ~\]\# cat /etc/sysconfig/network

NETWORKING=yes

HOSTNAME=oldboy36

## 1.10  开机自动挂载

\[root@oldboy ~\]\# cat /etc/fstab

\#

\# /etc/fstab

\# Created by anaconda on Sun Mar  6 16:23:29 2016

\#

\# Accessible filesystems, by reference, are maintained under '/dev/disk'

\# See man pages fstab\(5\), findfs\(8\), mount\(8\) and/or blkid\(8\) for more info

\#

UUID=fdd03bd8-212a-4e29-8be1-817dcfc0edcc /                       ext4    defaults        1 1

UUID=6d167fb4-7536-4076-b7be-9530cb88fee1 /boot                   ext4    defaults        1 2

UUID=848f0d7b-e66d-43e1-a9a9-e126657fcbab swap                    swap    defaults        0 0

tmpfs                   /dev/shm                tmpfs   defaults        0 0

devpts                  /dev/pts                devpts  gid=5,mode=620  0 0

sysfs                   /sys                    sysfs   defaults        0 0

proc                    /proc                   proc    defaults        0 0

## 1.11  开机自动启动程序

/etc/rc.local

## 1.12  系统运行级别

\[root@oldboy36 ~\]\# cat /etc/inittab

\# inittab is only used by upstart for the default runlevel.

\#

\# ADDING OTHER CONFIGURATION HERE WILL HAVE NO EFFECT ON YOUR SYSTEM.

\#

\# System initialization is started by /etc/init/rcS.conf

\#

\# Individual runlevels are started by /etc/init/rc.conf

\#

\# Ctrl-Alt-Delete is handled by /etc/init/control-alt-delete.conf

\#

\# Terminal gettys are handled by /etc/init/tty.conf and /etc/init/serial.conf,

\# with configuration in /etc/sysconfig/init.

\#

\# For information on how to write upstart event handlers, or how

\# upstart works, see init\(5\), init\(8\), and initctl\(8\).

\#

\# Default runlevel. The runlevels used are:

\#   0 - halt \(Do NOT set initdefault to this\)

\#   1 - Single user mode

\#   2 - Multiuser, without NFS \(The same as 3, if you do not have networking\)

\#   3 - Full multiuser mode

\#   4 - unused

\#   5 - X11

\#   6 - reboot \(Do NOT set initdefault to this\)

\#

id:3:initdefault:

## 1.13  查看当前运行级别

\[root@oldboy36 ~\]\# runlevel

N 3

## 1.14  切换运行级别

\[root@oldboy36 ~\]\# init 2

\[root@oldgirl ~\]\# ll /etc/rc.d/

init.d/     rc0.d/      rc2.d/      rc4.d/      rc6.d/      rc.sysinit

rc          rc1.d/      rc3.d/      rc5.d/      rc.local

\[root@oldgirl ~\]\# ll /etc/rc.d/

总用量 60

drwxr-xr-x. 2 root root  4096 3月   6 16:26 init.d

-rwxr-xr-x. 1 root root  2617 7月  24 2015 rc

drwxr-xr-x. 2 root root  4096 3月  13 21:02 rc0.d

drwxr-xr-x. 2 root root  4096 3月  13 21:02 rc1.d

drwxr-xr-x. 2 root root  4096 3月  13 21:02 rc2.d

drwxr-xr-x. 2 root root  4096 3月  13 21:02 rc3.d

drwxr-xr-x. 2 root root  4096 3月  13 21:02 rc4.d

drwxr-xr-x. 2 root root  4096 3月  13 21:02 rc5.d

drwxr-xr-x. 2 root root  4096 3月  13 21:02 rc6.d

-rwxr-xr-x. 1 root root   220 7月  24 2015 rc.local

-rwxr-xr-x. 1 root root 20097 7月  24 2015 rc.sysinit

\[root@oldgirl ~\]\# ll /etc/rc.d/rc3.d/

总用量 0

lrwxrwxrwx. 1 root root 16 3月   6 16:26 K01smartd -&gt; ../init.d/smartd

## 1.15   服务管理程序目录  /etc/init.d/

\[root@oldboy36 ~\]\# /etc/init.d/iptables status

iptables: Firewall is not running.

\[root@oldboy36 ~\]\# /etc/init.d/iptables stop

## 1.16  环境变量配置文件

/etc/profile

/etc/profile.d/\*.sh

~/ .bash\_profile

~/ .bashrc

/etc/bashrc

## 1.17  系统登录提示信息

/etc/issue      认证前的输出信息，默认输出版本内核信息

/etc/issue.net

/etc/motd    设置认证后的输出信息

## 1.18  系统日志文件

/var/log/messages

dmseg 命令可以查看系统故障信息（/var/log/dmesg） 依赖于rsyslog服务开启

轮询日志由 /etc/logrotate.conf  和  /etc/logrotate.d/syslog 控制



| /var/log/secure | 记录登入系统存取信息的文件，按周自动轮询，例如pop3,ssh,telnet,ftp等都会记录在此。系统安全的日志文件，依赖于rsyslog服务 |
| :--- | :--- |
| /var/log/messages | 系统默认的日志文件每周自动切割一次 |
| /var/log/wtmp | 记录登录者信息的文件 |
| /var/spool/cron/root | 定时任务配置文件 |
| /proc/cpuinfo | 关于处理器的信息，如类型、厂家、型号和性能等 top看cpu sar |
| /proc/meminfo | 系统内存信息，free -m |
| /proc/devices | 当前运行内核所配置的所有设备清单 |
| /proc/dma | 当前正在使用的DMA通道 |
| /proc/filesystems | 当前运行内核所配置的文件系统 |
| /proc/interrupts | 正在使用的中断，和曾经有多少个中断 |
| /proc/ioports | 当前正在使用的I/O端口 |
| /proc/loadavg | 系统负载平均值信息（系统的繁忙情况，比较准确，但是不够细致系统性能指标），uptime的结果负载值不要超过CPU的核数看负载top uptime |
| /proc/mounts | 设备的挂载信息， df -h类似 |

## 1.19  必须要掌握的重要目录文件

/etc/sysconfig/network-scripts/ifcfg-eth0

/etc/resolv.conf

/etc/hosts

/etc/sysconfig/network

/etc/fstab

/etc/rc.local

/etc/inittab

/etc/init.d

/etc/profile 全局（所有用户）

/etc/bashrc  全局（所有用户）

~/.bashrc    局部（当前用户）

/usr/local

/usr/src

/var/log/messages

/var/log/secure

/proc/cpuinfo

/proc/meminfo

/proc/loadavg

/proc/mounts

[http://yangrong.blog.51cto.com/6945369/1288072](http://yangrong.blog.51cto.com/6945369/1288072)

