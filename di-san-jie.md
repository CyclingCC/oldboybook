第1章 Vmware安装

1.1 修改虚拟网络中的子网ip

Vmware编辑中的虚拟网络编辑器中的VMnet8的子网ip改为192.168.56.0，以及子网掩码为255.255.255.0

点击确定完成

1.2 创建虚拟机

一定要选择自定义安装，否则接下来会出现不可避免的麻烦

1.3 安装来源

点击稍后安装操作系统

1.4 选择操作系统

客户机操作系统选择Linux，版本选择Centos64位

1.5 给虚拟机设置内存

根据自己电脑的内存大小选择，建议选择2G

1.6 网络类型

选择使用网络地址转换NAT

1.7 选择磁盘类型和选择I/O控制类型

直接选择默认即可

1.8 创建哪个磁盘

需要创建一个新的虚拟磁盘

1.9 指定磁盘文件

默认路径即可

1.10 最后点击下一步完成

可能会出现错误，让我们看一下可能出现的错误以及出现错误是如何解决的吧

第2章 安装Centos的过程及错误解决方案

2.1 错误解决方案

解决，进入bios在Securlty中找到Virtualization然后把enabled改成Disabled

问题解决了，接下来就可以安装Centos系统了

2.2 安装Centos6.8步骤

2.2.1 安装一个带有基本视频驱动的系统

2.2.2 跳过光盘的检查

2.2.3 可以按F2选择下一步

2.2.4 设置语言类型

2.2.5 键盘类型选择

2.2.6 安装设备类型选择

2.2.7 修改主机名

2.2.8 时区选择

2.2.9 root密码设置

2.2.10 安装类型选择

2.2.11 linux创建分区

/boot 200M

swap  虚拟内存	1.5倍内存大小，在这里分给768M

	  工作中：物理内存&lt;8G,SWAP 就 内存\*1.5

			  物理内存&gt;8G,SWAP 就 8G

/	  根	存放所有数据，剩余空间都给根

			\(/usr,/home,/var 等分区和/共用一份分区，像Windows的C盘，

			所有数据和系统文件都放在了一起\)

创建完成之后的格式

2.2.12 格式化分区

2.2.13 默认选择

2.2.14 最小化安装过程

2.2.15 具体到安装哪个包，一共四个包

2.2.16 最后出现501包的安装就说明您成功了

第3章 Xshell优化

3.1 修改会话框格式

3.2 会话属性设置

文件中的属性选项

类别终端中的类型选择linux，缓冲区大小为200000行，勾选将清除的屏幕推到滚动缓冲区

3.3 终端下的vt模式设置

初始数字键盘勾选为设置为普通 

3.4 终端下的高级设置

警用更改终端标题勾选

3.5 外观设置

字体默认，大小为14，选中使用闪烁的光标，速度为500毫秒

3.6 日志记录设置

文件路径：D:\Users\data\xshell\_log\%n\_%Y-%m-%d\_%t.log

不要选择文件已存在时覆盖

勾选连接时开始日志记录 

3.7 工具中选项设置

会话文件夹路径：D:\Users\xshell\services

鼠标中的设置：勾选将选定的文本自动复制到剪切板

更新中不勾选更新检查时间间隔

高级选项中勾选禁用铃声

第4章 ssh远程连接排查过程

4.1 为什么要远程连接linux系统

在实际的工作场景中，虚拟机界面或物理服务器本地的窗口都是很少能够接触到的，因为服务器装完系统后，都要拉到IDC机房托管，如果是购买了云主机，更碰不到服务器本地显示器了，此时只能通过远程连接的方式管理Linux系统。因此，在装好Linux系统后，学习Linux运维的第一步应该是配置好客户端软件远程（通过ssh软件进行连接）连接Linux系统进行管理。

4.2 ip地址

互联网上的计算机都会有一个唯一的32位的地址，ip地址===&gt;基因一样

我们访问\(找人\)服务器，就必须通过这个IP地址

局域网里也有预留的ip地址192/10/172开头。局域网的ip地址也是唯一。

NAT模式，电脑宿主机的ip在局域网是唯一的，选择了NAT模式创建虚拟机，虚拟机就是一个新的局域网\(私有网络\)

NAT模式：

PC电脑（笔记本）\(总裁\)

NAT\(副总裁\)

虚拟机（员工）（在一个局域网中）

桥接：

PC电脑\(总裁\)

虚拟机\(员工\)

host-only：

PC电脑\(员工\)

虚拟机（员工）

到后期虚拟机IP地址可以设置为相同

4.3 网络连接的整体结构

服务端：提供服务===&gt;sshd服务===&gt;22&lt;===监听 是否有人需要服务

客户端：ssh协议，ip地址，端口号\(需要什么服务\)，用户名和密码

远程连接五要素

协议	IP	端口号	用户名	密码

Ssh\(加密\)	10.0.0.7	22	Root	123456

telnet\(未加密\)	10.0.0.7	23	Root	123456

4.4 服务和进程问题

如果在本地都无法telnet到ssh 的远程端口，可以终端登陆服务器后可以先查看一下，服务器上ssh服务是否正常启动，使用netstat -natlp  可以查看一下相关的进程，如果有该sshd进程，并正常监听，说明可能是其他问题引起，如果没有使用service sshd start 的命令启动一下该服务在进行一下测试。如果启动失败，可以根据相关的提示的报错在逐一进行排查，或提及工单反馈到阿里云的售后协助您排查。

4.5 NetworkManeger是否运行

查看一下服务器上是否有运行NetworkManeger 的服务，这个服务会影响到您的网络，可以使用service NetworkManager status ,查看一下服务状态，如果是开启的，请使用stop命令停止，停止后还需要重启网卡服务，service network restart ；如果没有开启继续排查其他问题；

4.6 检查防火墙的状态

查看一下防火墙是否有拦截，可以先关闭防火墙测试，service iptables stop

4.7 端口号是否更改

当查看sshd 服务正常启动。防火墙关闭或没有拦截，网络服务正常运行时，外部如果还telnet 不到您的默认的端口，此时需要查看一下服务器的默认端口是否有更改，打开ssh的配置文件，vi/etc/ssh/sshd\_config 查看\# port  后面监听的端口是否有更改，默认是22 。以及 listenaddress  后面默认是0.0.0.0 表示全部网卡都监听，如果这里是127.0.0.1  那么代表只能本机上 ssh 连接的。

4.8 是否禁止root用户访问

如果此时端口已经都正常，但无法连接到服务器上，请查看ssh配置文件中是否禁止了 root用户登录，vi/etc/ssh/sshd\_config 中有相关的 参数 PermitRootLogin   看后面是否更改为了no  .默认是yes ,即允许root登陆连接

4.9 小结：

4.9.1 第一步：看看路是不是通的： 

ping 服务器：排查客户端到服务器端线路问题，ping是常用的网络连通性检查工具（路通否）

tracert -d 服务器IP：跟踪路由器

路由跟踪命令，也可以检查路由是否通畅，-d 是不对域名进行解析

4.9.2 第二步：去服务器端查看

service iptables status 和／etc/init.d／iptalbes status这两个命令都可以查看，等效。

linux防火墙iptables，可能好心办坏事，阻挡了远程连接，关掉防火墙，让道路畅通无阻

4.9.3 第三步：SSH服务问题

telnet + IP地址：查看SSH 22 端口是否打开了（客户端执行）

nmap + IP地址 + -p 22 ：扫描服务器是否开启了22端口

