#### crontab 定时任务生产应用问题10箴言

#### 需要修改系统环境变量问题 {#1111-需要修改系统环境变量问题}

export PATH

1.命令的绝对路径

2.在脚本中，修改使用的PATH

export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin

#### 定时任务要用绝对路径 {#1112-定时任务要用绝对路径}

#### 定时任务的脚本权限问题 {#1113-定时任务的脚本权限问题}

/bin/sh shell的脚本

#### 时间变量问题用反斜线 {#1114-时间变量问题用反斜线}

cd /&& tar zcf /data/html\_$\(date +\%F-\%M-\%H-%S\).tar.gz var/www/

#### 定时任务里面的命令或脚本要定向到空或指定个文件 {#1115-定时任务里面的命令或脚本要定向到空或指定个文件}

/dev/null 2&gt;&1 或者 &gt;&gt; /server/log/ip.log 2&gt;&1

#### 定时任务规则之前加注释 {#1116-定时任务规则之前加注释}

#### 使用脚本程序替代命令行定时任务 {#1117-使用脚本程序替代命令行定时任务}

#### 避免不必要的程序及命令输出 {#1118-避免不必要的程序及命令输出}

#### 打包压缩使用相对路径（切到目录目录的上一级打包目标） {#1119-打包压缩使用相对路径（切到目录目录的上一级打包目标）}

#### 定时任务脚本中的程序命令及路径尽量用全路径 {#11110-定时任务脚本中的程序命令及路径尽量用全路径}

### 定时任务使用命令出现的报错 {#112-定时任务使用命令出现的报错}

常见报错

command not found 命令没有找到

No such file or directory 没有这个文件或目录

Permission denied 权限不足

### 定时任务步骤 {#113-定时任务步骤}

\#\#\#\#第一个里程碑-准备环境

mkdir

\#\#\#\#第二个里程碑-命令行执行命令--是否好使

tar 或者

升级版

cd / && tar 放包目录.tar.gz 要打包的目录

\#\#\#\#第三个里程碑-放入到脚本（文件） xxxx.sh

/bin/sh xxx.sh

\#\#\#\#第四个里程碑-写入到定时任务里面

\* \* \* \* \* /bin/sh xxx.sh /dev/null 2&gt;&1

升级版

写真正的定时任务

\#\#\#\#第五个里程碑-检查并修改定时任务执行时间

tail -f /var/log/cron

ls 目录

